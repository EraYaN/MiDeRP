\documentclass{report}
\input{../../library/preamble}
\input{../../library/style}
\addbibresource{../../library/bibliography.bib}

\title{EPO-2: Mid-term Design Report - De Simpele Lijnvolger}
\author{Luc Does}

\begin{document}

\chapter{Simpele Lijnvolger}
\label{ch:lijnvolger}

\section{Eisen}
De basiseis waaraan de robot moet voldoen is het volgen van een zwarte lijn.
Het is dan ook van groot belang dat de robot deze taak foutloos uit kan voeren.
Om dit klaar te spelen zal de geïmplementeerde lijnvolger aan een aantal eisen moeten voldoen.

\begin{itemize}
\item Zwarte lijn detecteren
\item Afwijkingen van het pad corrigeren
\end{itemize}

\section{Ontwerp}
Het ontwerp van de lijnvolger is een simpele maar doeltreffende opzet.
Een printplaat met daarop drie reflectiesensoren is aangesloten op een FPGA.
Deze printplaat is onder de robot bevestigd, waarbij de sensoren bij startpositie boven de lijn hangen, de twee buitenste sensoren vallen buiten de lijn en de middelste staat op de lijn.
Binnen de FPGA is een logische schakeling aanwezig die bepaalt welke sensoren wel of niet op de lijn staan.
Aan de hand van deze uitlezing wordt bepaald hoe de servomotoren aangestuurd worden.

\section{Implementatie}
De schakeling binnen de FPGA is beschreven in VHDL.
Deze VHDL-code is terug te vinden in de bijlagen, sectie \ref{appsec:motorcontrol.vhdl}.
Om de robot werkelijk de lijn te laten volgen wordt met behulp van de motorcontroller (Hoofdstuk \ref{ch:servo}) een PWM-signaal doorgezonden naar de servomotoren.
De duur van deze pulsen wordt bepaald aan de hand van de uitlezing van de sensoren.
In de VHDL-code van de lijnvolger is dit te zien aan de verschillende combinaties van sensorwaarden die de linker- en rechtermotorsnelheden bepalen.

\section{Test}
De lijnvolger is de basis van de Smart Robot Challenge.
Het is dus van het groot belang dat dit onderdeel feilloos functioneert.
Om er zeker van te zijn dat de lijnvolger naar behoren werkt heeft de TU Delft ons een aantal testlijnen geleverd.
Wij hebben de robot uitgebreid getest op elke lijn en de robot wist deze foutloos te volgen.
Een opvallende bijzaak is wel dat de robot een lichte afwijking heeft, dit terwijl beide servomotoren hetzelfde PWM-signaal toegestuurd krijgen.

\newpage
\section{Discussie}
De lijnvolger werkt haast perfect op een lichte in één van de servomotoren afwijking na.
Aangezien de robot deze afwijking moet corrigeren zal dit mankement tijd kosten tijdens de wedstrijd.
Om dit probleem op te lossen zouden wij het PWM-signaal van de linker servo lichtelijk aanpassen ten opzichte van het PWM-signaal van de rechter servo en zo de wielen synchroon laten draaien.
Maar aangezien het oplossen van dit probleem tijd kost, welke beter geïnvesteerd kan worden in problemen die belangrijker zijn, hebben wij besloten dit niet te doen.
\end{document}