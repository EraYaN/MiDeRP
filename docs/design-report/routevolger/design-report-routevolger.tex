\documentclass{report}
\input{../../library/preamble}
\input{../../library/style}
\addbibresource{../../library/bibliography.bib}

\title{EPO-2: Mid-term Design Report - routevolger}
\author{Tijmen Witte}

\begin{document}

\chapter{Routevolger}
\label{ch:routevolger}

Als er naar het grid wordt gekeken in bijlage \textbf{??} kan men zien dat er meer komt kijken dan alleen het volgen van een lijn, zoals in het vorige hoofdstuk beschreven is.
Doordat er kruispunten aanwezig zijn, ontstaan er drie mogelijke wegen die de robot kan nemen.
Bij het volgen van de route moet de robot rekening houden met de kortste route en hier op inspelen.
Mochten er mijnen op de route liggen dan moet de robot op het moment dat hij deze herkend terugrijden, zodat de lichtsensoren weer voor het kruispunt zitten.
Is dit niet het geval dan slaat hij het kruispunt over, waardoor hij letterlijk de weg kwijt is.

\section{Eisen}
De robot moet een kruispunt kunnen herkennen en vervolgens de keuze kunnen maken welke weg hij ingaat.
Deze keuze is afhankelijk van de kortste route die de robot kan nemen.
Als de robot van startpunt 1 naar eindpunt 6 gaat, is het onlogisch om bij het eerste kruispunt naar links te gaan, aangezien de robot dan verder van het eindpunt wegrijdt.
Verder moet de robot achteruit kunnen rijden.

\section{Ontwerp}
Het ontwerp van de routevolger is een aanvulling op de code van de lijnvolger.
Zo moet er in de VHDL-code extra worden weergegeven wanneer de robot op een kruispunt staat.
Mocht de robot op een kruispunt staan dan geven de lichtsensoren de bit '000' door. Hierdoor weet de robot dat hij op een kruispunt staat.
Verder moet de robot bochten kunnen maken wat te maken heeft met de VHDL-code van de servo-motoren.

\section{Implementatie}
Onze implementatie van de lijnvolger is te vinden in bijlage \ref{ssec:controller.vhdl}.

\section{Test}
We hebben een eigen testveld gemaakt, waarop we de robot hebben kunnen testen.
Dit veld is te zien in afbeelding \ref{fig:testfield}.
Door de robot van punt $1_A$ naar punt $3_B$ te laten rijden, hebben we kunnen testen of de robot de kruispunten herkende en of hij de bochten in de juiste richting nam.
Nadat de mijnendetector was aangesloten, hebben we mijnen geplaatst op de middenstukken en konden we testen of de robot op het juiste moment $180^\circ$ draaide als hij een mijn had gedetecteerd, waardoor de lichtsensoren weer voor het kruispunt  recht op de lijn kwamen te zitten.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{d-2_test_field.png}
	\caption{Zelf gemaakte testfield  bij EPO-2}
	\label{fig:testfield}
\end{figure}

\section{Discussie}

??

\end{document}